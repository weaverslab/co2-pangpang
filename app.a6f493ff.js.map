{"version":3,"sources":["1/app.js"],"names":["App","canvas","document","getElementById","pixelRatio","window","devicePixelRatio","width","innerWidth","height","innerHeight","statusElm","inputWordElm","resultElm","finalScoreElm","defaultSpeed","speedVariable","defaultSpawnInterval","life","spawnT","undefined","scoreT","words","keywords","onScreenKeywords","score","resize","addEventListener","handleInput","bind","requestAnimationFrame","animate","showStatus","addWord","spawnWord","scoring","e","code","inputText","value","removeWord","setInterval","setTimeout","Math","floor","random","candidate","filter","keyword","includes","text","length","push","makeWord","elm","createElement","classList","add","innerText","pos","bottom","left","word","speed","appendChild","wordIdx","findIndex","onScreenIdx","removeChild","splice","forEach","style","innerHTML","clearTimeout","clearInterval","display","t","update","move","gameover","test","navigator","userAgent","onload","app"],"mappings":"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","file":"app.a6f493ff.js","sourceRoot":"../src","sourcesContent":["class App {\n  constructor() {\n    // screen setting\n    this.canvas = document.getElementById(\"app\");\n    this.pixelRatio = window.devicePixelRatio > 1 ? 2 : 1;\n    this.width = window.innerWidth;\n    this.height = window.innerHeight;\n    this.statusElm = document.getElementById(\"status\");\n    this.inputWordElm = document.getElementById(\"inputWord\");\n    this.resultElm = document.getElementById(\"result\");\n    this.finalScoreElm = document.getElementById(\"finalScore\");\n    // game setting\n    this.defaultSpeed = 3;\n    this.speedVariable = 3;\n    this.defaultSpawnInterval = 2000;\n    this.life = 10;\n    this.spawnT = undefined;\n    this.scoreT = undefined;\n    // game data\n    this.words = [];\n    this.keywords = [\n      \"고양이\",\n      \"강아지\",\n      \"거북이\",\n      \"토끼\",\n      \"뱀\",\n      \"사자\",\n      \"호랑이\",\n      \"표범\",\n      \"치타\",\n      \"하이에나\",\n      \"기린\",\n      \"코끼리\",\n      \"코뿔소\",\n      \"하마\",\n      \"악어\",\n      \"펭귄\",\n      \"부엉이\",\n      \"올빼미\",\n      \"곰\",\n      \"돼지\",\n      \"소\",\n      \"닭\",\n      \"독수리\",\n      \"타조\",\n      \"고릴라\",\n      \"오랑우탄\",\n      \"침팬지\",\n      \"원숭이\",\n      \"코알라\",\n      \"캥거루\",\n      \"고래\",\n      \"상어\",\n      \"칠면조\",\n      \"직박구리\",\n      \"쥐\",\n      \"청설모\",\n      \"메추라기\",\n      \"앵무새\",\n      \"삵\",\n      \"스라소니\",\n      \"판다\",\n      \"오소리\",\n      \"오리\",\n      \"거위\",\n      \"백조\",\n      \"두루미\",\n      \"고슴도치\",\n      \"두더지\",\n      \"우파루파\",\n      \"맹꽁이\",\n    ];\n    this.onScreenKeywords = [];\n    this.score = 0;\n\n    // event listener\n    this.resize();\n    this.inputWordElm.addEventListener(\"keydown\", this.handleInput.bind(this));\n    window.addEventListener(\"resize\", this.resize.bind(this), false);\n    window.requestAnimationFrame(this.animate.bind(this));\n\n    // game init\n    this.showStatus();\n    this.addWord();\n    this.spawnWord();\n    this.scoring();\n  }\n\n  resize() {\n    this.width = window.innerWidth;\n    this.height = window.innerHeight;\n  }\n\n  handleInput(e) {\n    if (e.code === \"Enter\") {\n      const inputText = this.inputWordElm.value;\n      this.removeWord(inputText);\n      this.inputWordElm.value = \"\";\n    }\n  }\n  scoring() {\n    this.scoreT = setInterval(() => {\n      this.score += 1;\n      if (this.score % 15 === 0) {\n        this.defaultSpawnInterval /= 2;\n      }\n    }, 1000);\n  }\n  spawnWord() {\n    this.spawnT = setTimeout(() => {\n      this.addWord();\n      this.spawnWord();\n    }, this.defaultSpawnInterval + Math.floor((Math.random() - 0.5) * 1000));\n  }\n\n  addWord() {\n    const candidate = this.keywords.filter(\n      (keyword) => !this.onScreenKeywords.includes(keyword)\n    );\n    const text = candidate[Math.floor(Math.random() * candidate.length)];\n    this.onScreenKeywords.push(text);\n    this.makeWord(text);\n  }\n\n  makeWord(text) {\n    const elm = document.createElement(\"div\");\n    elm.classList.add(\"word\");\n    elm.innerText = text;\n    const pos = {\n      bottom: -20,\n      left: Math.random() * (this.width - text.length * 16),\n    };\n    const word = {\n      elm: elm,\n      pos: pos,\n      text: text,\n      speed: this.defaultSpeed + Math.random() * this.speedVariable,\n    };\n    this.words.push(word);\n    this.canvas.appendChild(elm);\n  }\n\n  removeWord(text) {\n    const wordIdx = this.words.findIndex((word) => word.text === text);\n    if (wordIdx < 0) {\n      return;\n    }\n    const onScreenIdx = this.onScreenKeywords.findIndex(\n      (word) => word.text === text\n    );\n    this.canvas.removeChild(this.words[wordIdx].elm);\n    this.words.splice(wordIdx, 1);\n    this.onScreenKeywords.splice(onScreenIdx, 1);\n  }\n\n  update() {\n    this.words.forEach((word) => {\n      word.pos.bottom += word.speed;\n      if (word.pos.bottom > this.height - 130) {\n        this.life -= 1;\n        this.removeWord(word.text);\n        this.showStatus();\n      }\n    });\n  }\n\n  move() {\n    this.words.forEach((word) => {\n      word.elm.style.bottom = word.pos.bottom + \"px\";\n      word.elm.style.left = word.pos.left + \"px\";\n    });\n  }\n\n  showStatus() {\n    // life info\n    this.statusElm.innerHTML = `\n      <svg\n        width=\"24\"\n        height=\"24\"\n        viewBox=\"0 0 24 24\"\n      >\n        <path d=\"M12 4.435c-1.989-5.399-12-4.597-12 3.568 0 4.068 3.06 9.481 12 14.997 8.94-5.516 12-10.929 12-14.997 0-8.118-10-8.999-12-3.568z\" />\n      </svg>\n      <span>${this.life}</span>\n      `;\n  }\n\n  gameover() {\n    clearTimeout(this.spawnT);\n    clearInterval(this.scoreT);\n    this.finalScoreElm.innerHTML = `최종 점수 : ${this.score} 초`;\n    this.resultElm.style.display = \"flex\";\n  }\n\n  animate(t) {\n    this.update();\n    this.move();\n    if (this.life > 0) {\n      window.requestAnimationFrame(this.animate.bind(this));\n    } else {\n      this.gameover();\n    }\n  }\n\n  isMobile() {\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n      navigator.userAgent\n    );\n  }\n}\n\nwindow.onload = () => {\n  const app = new App();\n};\n"]}