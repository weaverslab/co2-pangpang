{"version":3,"sources":["1/app.js"],"names":["App","canvas","document","getElementById","pixelRatio","window","devicePixelRatio","width","innerWidth","height","innerHeight","statusElm","inputWordElm","resultElm","finalScoreElm","defaultSpeed","speedVariable","defaultSpawnInterval","life","spawnT","undefined","scoreT","words","keywords","onScreenKeywords","score","resize","addEventListener","handleInput","bind","requestAnimationFrame","animate","showStatus","addWord","spawnWord","scoring","e","code","inputText","value","removeWord","setInterval","setTimeout","Math","floor","random","candidate","filter","keyword","includes","text","length","push","makeWord","elm","createElement","classList","add","innerText","pos","word","bottom","left","speed","appendChild","wordIdx","findIndex","onScreenIdx","removeChild","splice","forEach","style","innerHTML","clearTimeout","clearInterval","display","t","update","move","gameover","test","navigator","userAgent","onload"],"mappings":"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","file":"app.762fe54b.js","sourceRoot":"../src","sourcesContent":["class App {\n  constructor() {\n    // screen setting\n    this.canvas = document.getElementById(\"app\");\n    this.pixelRatio = window.devicePixelRatio > 1 ? 2 : 1;\n    this.width = window.innerWidth;\n    this.height = window.innerHeight;\n    this.statusElm = document.getElementById(\"status\");\n    this.inputWordElm = document.getElementById(\"inputWord\");\n    this.resultElm = document.getElementById(\"result\");\n    this.finalScoreElm = document.getElementById(\"finalScore\");\n    // game setting\n    this.defaultSpeed = 3;\n    this.speedVariable = 3;\n    this.defaultSpawnInterval = 2000;\n    this.life = 10;\n    this.spawnT = undefined;\n    this.scoreT = undefined;\n    // game data\n    this.words = [];\n    this.keywords = [\n      \"고양이\",\n      \"강아지\",\n      \"거북이\",\n      \"토끼\",\n      \"뱀\",\n      \"사자\",\n      \"호랑이\",\n      \"표범\",\n      \"치타\",\n      \"하이에나\",\n      \"기린\",\n      \"코끼리\",\n      \"코뿔소\",\n      \"하마\",\n      \"악어\",\n      \"펭귄\",\n      \"부엉이\",\n      \"올빼미\",\n      \"곰\",\n      \"돼지\",\n      \"소\",\n      \"닭\",\n      \"독수리\",\n      \"타조\",\n      \"고릴라\",\n      \"오랑우탄\",\n      \"침팬지\",\n      \"원숭이\",\n      \"코알라\",\n      \"캥거루\",\n      \"고래\",\n      \"상어\",\n      \"칠면조\",\n      \"직박구리\",\n      \"쥐\",\n      \"청설모\",\n      \"메추라기\",\n      \"앵무새\",\n      \"삵\",\n      \"스라소니\",\n      \"판다\",\n      \"오소리\",\n      \"오리\",\n      \"거위\",\n      \"백조\",\n      \"두루미\",\n      \"고슴도치\",\n      \"두더지\",\n      \"우파루파\",\n      \"맹꽁이\",\n    ];\n    this.onScreenKeywords = [];\n    this.score = 0;\n\n    // event listener\n    this.resize();\n    this.inputWordElm.addEventListener(\"keydown\", this.handleInput.bind(this));\n    window.addEventListener(\"resize\", this.resize.bind(this), false);\n    window.requestAnimationFrame(this.animate.bind(this));\n\n    // game init\n    this.showStatus();\n    this.addWord();\n    this.spawnWord();\n    this.scoring();\n  }\n\n  resize() {\n    this.width = window.innerWidth;\n    this.height = window.innerHeight;\n  }\n\n  handleInput(e) {\n    if (e.code === \"Enter\") {\n      const inputText = this.inputWordElm.value;\n      this.removeWord(inputText);\n      this.inputWordElm.value = \"\";\n    }\n  }\n  scoring() {\n    this.scoreT = setInterval(() => {\n      this.score += 1;\n      if (this.score % 15 === 0) {\n        this.defaultSpawnInterval /= 2;\n      }\n    }, 1000);\n  }\n  spawnWord() {\n    this.spawnT = setTimeout(() => {\n      this.addWord();\n      this.spawnWord();\n    }, this.defaultSpawnInterval + Math.floor((Math.random() - 0.5) * 1000));\n  }\n\n  addWord() {\n    const candidate = this.keywords.filter(\n      (keyword) => !this.onScreenKeywords.includes(keyword)\n    );\n    const text = candidate[Math.floor(Math.random() * candidate.length)];\n    this.onScreenKeywords.push(text);\n    this.makeWord(text);\n  }\n\n  makeWord(text) {\n    const elm = document.createElement(\"div\");\n    elm.classList.add(\"word\");\n    elm.innerText = text;\n    const pos = {\n      bottom: -20,\n      left: Math.random() * (this.width - text.length * 16),\n    };\n    const word = {\n      elm: elm,\n      pos: pos,\n      text: text,\n      speed: this.defaultSpeed + Math.random() * this.speedVariable,\n    };\n    this.words.push(word);\n    this.canvas.appendChild(elm);\n  }\n\n  removeWord(text) {\n    const wordIdx = this.words.findIndex((word) => word.text === text);\n    if (wordIdx < 0) {\n      return;\n    }\n    const onScreenIdx = this.onScreenKeywords.findIndex(\n      (word) => word.text === text\n    );\n    this.canvas.removeChild(this.words[wordIdx].elm);\n    this.words.splice(wordIdx, 1);\n    this.onScreenKeywords.splice(onScreenIdx, 1);\n  }\n\n  update() {\n    this.words.forEach((word) => {\n      word.pos.bottom += word.speed;\n      if (word.pos.bottom > this.height - 130) {\n        this.life -= 1;\n        this.removeWord(word.text);\n        this.showStatus();\n      }\n    });\n  }\n\n  move() {\n    this.words.forEach((word) => {\n      word.elm.style.bottom = word.pos.bottom + \"px\";\n      word.elm.style.left = word.pos.left + \"px\";\n    });\n  }\n\n  showStatus() {\n    // life info\n    this.statusElm.innerHTML = `\n      <svg\n        width=\"24\"\n        height=\"24\"\n        viewBox=\"0 0 24 24\"\n      >\n        <path d=\"M12 4.435c-1.989-5.399-12-4.597-12 3.568 0 4.068 3.06 9.481 12 14.997 8.94-5.516 12-10.929 12-14.997 0-8.118-10-8.999-12-3.568z\" />\n      </svg>\n      <span>${this.life}</span>\n      `;\n  }\n\n  gameover() {\n    clearTimeout(this.spawnT);\n    clearInterval(this.scoreT);\n    this.finalScoreElm.innerHTML = `최종 점수 : ${this.score} 초`;\n    this.resultElm.style.display = \"flex\";\n  }\n\n  animate(t) {\n    this.update();\n    this.move();\n    if (this.life > 0) {\n      window.requestAnimationFrame(this.animate.bind(this));\n    } else {\n      this.gameover();\n    }\n  }\n\n  isMobile() {\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n      navigator.userAgent\n    );\n  }\n}\n\nwindow.onload = () => {\n  const app = new App();\n};\n"]}